<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="member">
		<!-- namespace : mapper.xml을 식별할 수 있는 값 -->
		
		<!-- 
		
		[표현식]
		
		<SQL 종류
		id=""						//현재 mapper.xml에서 각 SQL을 식별할 수 있는 값
		parameterType=""			//DAO에서 SQL 호출하며 전달한 파라미터의 자료형
		resultType=""				//SQL 수행결과를 저장할 Java 자료형
		
		실제 수행할 SQL
		
		</SQL 종류>
		
		[특징]
		
		1) SELECT 결과의 각 컬럼값을, Java 객체 변수명과 일치시키면 자동으로 값이 세팅된다.
		2) 전달된 파라미터(Member 객체)를 SQL에 바인딩 하기 위해, #{필드명}를 사용한다.
			-> #{memberId}		->   'user01'
			-> #{memberPw}      ->   '1234'
			-> ${memberId}      ->   user01    -> SQL Injection 보안상 권장되지 않는다.
		3) SQL문 마지막에 세미콜론(;)은 작성하지 않는다.
		
		 	
		 -->
		 
	<!-- 회원 정보 조회(로그인) -->
	<select id="selectOneMember" 
	parameterType="kr.or.iei.member.model.vo.Member" 
	resultType="kr.or.iei.member.model.vo.Member">
	select member_no as memberNo,
		   member_id as memberId,
		   member_pw as memberPw,
		   member_name as memberName,
		   member_addr as memberAddr,
		   member_email as memberEmail,
		   member_phone as memberPhone,
		   enroll_date as enrollDate
	  from tbl_member
	where member_id = #{memberId}
	  and member_pw = #{memberPw}
	</select>
	
	<!-- 회원 정보 등록 -->
	<!-- 행의 갯수가 리턴되므로 int 타입인 insert 결과타입은 생략 가능(당연히) -->
	<insert id="insertMember" 
	parameterType="kr.or.iei.member.model.vo.Member">
	insert into tbl_member 
				(
				 member_no, 
				 member_id, 
				 member_pw, 
				 member_name, 
				 member_addr,
				 member_email,
				 member_phone,
				 member_level, 
				 enroll_date 
				 ) 
				values 
				(  
				seq_member.nextval,
				#{memberId},
				#{memberPw},
				#{memberName},
				#{memberAddr},
				#{memberEmail},
				#{memberPhone},
				default,
				sysdate
				)
	
	</insert>
	
	<!-- 전체 회원 조회 -->
	<select id="selectAllMember"
	resultType="kr.or.iei.member.model.vo.Member">
	<!-- List로 관리되는 객체의 자료형을 작성하면 된다. (결과적으로 Member) -->
	select member_no as memberNo,
	       member_id as memberId,
	       member_pw as memberPw,
	       member_name as memberName,
	       member_addr as memberAddr,
	       member_email as memberEmail,
	       member_level as memberLevel,
	       member_phone as memberPhone,
	       enroll_date as enrollDate
	  from tbl_member
	  order by 1
	</select>
</mapper>
